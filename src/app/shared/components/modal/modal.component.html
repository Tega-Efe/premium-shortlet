@if (isOpen()) {
  <div 
    class="modal-overlay" 
    [@fadeInOut]
    (click)="onOverlayClick()"
    [class.blur-backdrop]="blurBackdrop()"
  >
    <div 
      class="modal-container" 
      [@scaleIn]
      [class.modal-sm]="size() === 'sm'"
      [class.modal-lg]="size() === 'lg'"
      [class.modal-xl]="size() === 'xl'"
      [class.modal-type-success]="type() === 'success'"
      [class.modal-type-warning]="type() === 'warning'"
      [class.modal-type-error]="type() === 'error'"
      [class.modal-type-info]="type() === 'info'"
      (click)="$event.stopPropagation()"
    >
      <!-- Modal Header -->
      @if (title() || showCloseButton()) {
        <div class="modal-header">
          @if (type() && type() !== 'default') {
            <div class="modal-icon">
              @if (type() === 'success') {
                <i class="fas fa-check-circle"></i>
              } @else if (type() === 'warning') {
                <i class="fas fa-exclamation-triangle"></i>
              } @else if (type() === 'error') {
                <i class="fas fa-times-circle"></i>
              } @else if (type() === 'info') {
                <i class="fas fa-info-circle"></i>
              }
            </div>
          }
          <h2 class="modal-title">{{ title() }}</h2>
          @if (showCloseButton()) {
            <button 
              class="modal-close" 
              (click)="close()"
              aria-label="Close modal"
            >
              <i class="fas fa-times"></i>
            </button>
          }
        </div>
      }

      <!-- Modal Body -->
      <div class="modal-body" [class.no-header]="!title() && !showCloseButton()">
        <ng-content></ng-content>
      </div>

      <!-- Modal Footer -->
      @if (showFooter()) {
        <div class="modal-footer">
          <ng-content select="[footer]"></ng-content>
          
          @if (showDefaultButtons()) {
            <div class="modal-actions">
              @if (showCancelButton()) {
                <button 
                  class="btn btn-secondary" 
                  (click)="cancel()"
                >
                  <i class="fas fa-times"></i>
                  <span>{{ cancelText() }}</span>
                </button>
              }
              @if (showConfirmButton()) {
                <button 
                  class="btn btn-primary" 
                  (click)="confirm()"
                  [disabled]="confirmDisabled()"
                >
                  <i class="fas fa-check"></i>
                  <span>{{ confirmText() }}</span>
                </button>
              }
            </div>
          }
        </div>
      }
    </div>
  </div>
}
